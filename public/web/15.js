(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{426:function(e,t,n){"use strict";n(423),n(424),n(81),n(425),n(105),n(80),n(154),n(427);var r=n(107),a=n(0),c=n.n(a),l=n(64),i=n(35),o=n.n(i),u=n(47),A=n(59);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,439))})),m=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,440))}));t.a=Object(l.connect)((function(e){return{user:e.common.user}}),(function(e){return{logout:function(){return e({type:"common/logout"})}}}))((function(e){var t=e.user,l=e.logout,i=Object(a.useRef)(),f=d(Object(a.useState)(!1),2),p=f[0],v=f[1],b=d(Object(a.useState)(!1),2),y=b[0],O=b[1],E=Object(a.useCallback)((function(){O(!0)}),[]);Object(a.useEffect)((function(){window.addEventListener("click",(function(e){var t=e.target;i.current&&!i.current.contains(t)&&v(!1)}))}),[]);var g=Object(a.useCallback)((function(e){e(),v(!1)}),[]);return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"standard-size"},c.a.createElement("div",{className:"logo"},c.a.createElement("a",{href:"/#/web/recommend"},c.a.createElement("img",{src:n(430),alt:"xio"}))),c.a.createElement("div",{className:"nav"},c.a.createElement(s,{href:"/web/recommend"},"推荐")),c.a.createElement("div",{className:"search"},c.a.createElement("input",{id:"search",type:"text"}),c.a.createElement("label",{htmlFor:"search",className:"sarch-btn"})),c.a.createElement("div",{className:"visitor"},c.a.createElement(m,{visible:y,onClose:function(){return O(!1)}}),t.uid?c.a.createElement("div",{className:"user-box"},c.a.createElement("div",{onClick:function(){return Object(A.a)("write")},className:"write-article"},"写文章"),c.a.createElement("div",{ref:i},c.a.createElement("span",{className:"user-avatar",onClick:function(){return v(!p)}},c.a.createElement("img",{src:t.avatar||u.a.user.avatar,alt:"头像"}),c.a.createElement(r.a,{className:o()({"user-avatar__down":!p,"user-avatar__up":p}),type:"caret-down"})),p&&c.a.createElement("div",{className:"user-items"},c.a.createElement("div",{onClick:function(){return v(!1)}},c.a.createElement("a",{href:"/#/web/user?uid="+t.uid},"我的主页")),c.a.createElement("div",null,"我的收藏"),c.a.createElement("div",{onClick:function(){return v(!1)}},c.a.createElement("a",{href:"/#/web/user/setting"},"设置")),c.a.createElement("div",{onClick:function(){return g(l)}},"退出")))):c.a.createElement("div",{className:"anonymous-box"},c.a.createElement("div",{onClick:E,className:"login"},"登陆"),c.a.createElement("a",{href:"/#/auth?tab=register"},c.a.createElement("div",{className:"register"},"注册"))))))}))},430:function(e,t){e.exports="data:image/png;base64,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"},862:function(e,t,n){"use strict";n.r(t);n(154),n(155),n(110),n(111),n(112),n(113),n(108),n(109),n(423),n(424),n(425),n(105),n(859);var r=n(852),a=(n(860),n(847)),c=(n(433),n(831),n(239),n(240),n(238),n(80),n(62),n(81),n(236),n(458),n(468),n(479)),l=(n(242),n(145)),i=(n(84),n(832),n(857)),o=(n(427),n(107)),u=(n(834),n(853)),A=(n(836),n(854)),d=(n(838),n(858)),s=n(0),m=n.n(s),f=n(840),p=n.n(f),v=n(841),b=n.n(v),y=n(35),O=n.n(y),E=n(64),g=n(426),h=n(21);function k(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){k(c,r,a,l,i,"next",e)}function i(e){k(c,r,a,l,i,"throw",e)}l(void 0)}))}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var K=d.a.TreeNode,X=Object(E.connect)(void 0,(function(e){return{editArticleGroup:function(t){return e({type:"article/editArticleGroup",payload:t})},deleteArticleGroup:function(t){return e({type:"article/deleteArticleGroup",id:t})},deleteArticle:function(t){return e({type:"article/deleteArticle",id:t})}}}))((function(e){var t=e.id,n=e.deleteArticle,r=e.deleteArticleGroup,a=e.editArticleGroup,c=e.title,l=e.type,d=void 0===l?"group":l,f=e.addArticle,p=void 0===f?function(){}:f,v=e.addGroup,b=void 0===v?function(){}:v,y="group"===d,E=R(Object(s.useState)(!1),2),g=E[0],h=E[1],k=R(Object(s.useState)(!1),2),j=k[0],N=k[1],w=R(Object(s.useState)(c),2),x=w[0],K=w[1],X=Object(s.useRef)();Object(s.useEffect)((function(){K(c)}),[c]);var V=Object(s.useCallback)((function(e){A.a.confirm({okText:"确认",cancelText:"取消",content:"确认删除",onOk:function(){"group"===d&&r(t),"article"===d&&n(t)}})}),[t]),S=Object(s.useCallback)((function(e){N(!1),K(e.target.value),a({id:t,title:e.target.value})}),[]);return Object(s.useEffect)((function(){j&&X.current.focus()}),[j]),m.a.createElement(i.a,{overlay:m.a.createElement(u.a,null,y&&m.a.createElement(u.a.Item,{onClick:function(){return p(t)}},"添加文章"),y&&m.a.createElement(u.a.Item,{onClick:function(){return b()}},"添加分组"),m.a.createElement(u.a.Item,{onClick:V},"删除")),trigger:["contextMenu"]},m.a.createElement("div",{onMouseMove:function(){return h(!0)},onMouseLeave:function(){h(!1)},className:"i-tree-node"},y&&m.a.createElement("div",{onDoubleClick:function(){return N(!0)},className:"context-menu__title"},!j&&m.a.createElement("b",{title:"双击修改"},x),j&&m.a.createElement("input",{ref:X,onBlur:S,defaultValue:x,type:"text"})),!y&&m.a.createElement("div",{className:"context-menu__title"},x),m.a.createElement("div",{onClick:V,className:O()({"context-menu__delete":!g,"context-menu__delete_show":g})},m.a.createElement(o.a,{type:"delete"}))))}));t.default=Object(E.connect)((function(e){return{articleGroup:e.article.articleGroup,articles:e.article.articles,updateLoading:e.article.updateArticle.loading,storeLoading:e.article.storeArticle.loading}}),(function(e){return{setArticleGroup:function(t){e({type:"article/setArticleGroup",payload:t})},fetchArticleGroup:function(){e({type:"article/fetchArticleGroup"})},modifyArticleGroupPid:function(t){e({type:"article/modifyArticleGroupPid",payload:t})},fetchArticles:function(){e({type:"article/fetchArticles"})},addArticle:function(t){e({type:"article/addArticle",payload:t})},modifyArticle:function(t){e({type:"article/modifyArticle",payload:t})},moveArticle:function(t){e({type:"article/moveArticle",payload:t})}}}))((function(e){var t=e.articles,n=e.moveArticle,f=e.modifyArticle,v=e.fetchArticles,y=e.addArticle,O=e.articleGroup,E=e.modifyArticleGroupPid,k=e.setArticleGroup,N=e.fetchArticleGroup,x=e.updateLoading,q=e.storeLoading,Z=R(Object(s.useState)(""),2),F=Z[0],C=Z[1],P=R(Object(s.useReducer)(S,V),2),U=P[0],G=P[1],J=R(Object(s.useState)(),2),T=J[0],W=J[1],z=Object(s.useRef)(),M=Object(s.useRef)(),Q=Object(s.useRef)();Object(s.useEffect)((function(){function e(){return(e=j(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:v();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){b.a.unbind("ctrl+s"),b()("ctrl+s",(function(){return H(U),!1}))}),[U]),Object(s.useEffect)((function(){var e=new p.a(z.current,M.current);e.customConfig.customUploadImg=function(){var e=j(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("picture",t[0]),Object(h.f)(r).then((function(e){var t=e.data;n((void 0===t?[]:t).pop())}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.customConfig.onchange=function(e){G({payload:{content:e}})},e.create(),W(e)}),[z,M]);var Y=Object(s.useCallback)(j(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:0,F||t){e.next=4;break}return e.abrupt("return",l.a.error("请输入内容"));case 4:return e.next=6,k({pid:n,title:t||F});case 6:C("");case 7:case"end":return e.stop()}}),e)}))),[F]),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";A.a.confirm({cancelText:"取消",okText:"确认",icon:!1,title:"添加分组",width:300,content:m.a.createElement(c.a,{onChange:function(e){return t=e.target.value}}),onCancel:function(){return C("")},onOk:function(){return Y(t,e)}})},D=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return m.a.createElement(K,{switcherIcon:m.a.createElement(o.a,{type:"file"}),title:m.a.createElement(X,{id:e.id,title:e.title,type:"article"}),key:e.group_id+"-article-"+e.id})}))}),[]),B=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.list;return Object.values(e).map((function(e){return m.a.createElement(K,{isLeaf:!1,title:m.a.createElement(X,{id:e.id,addArticle:function(e){return G({type:"add",payload:{group_id:Number(e)}})},addGroup:function(){return L(e.id)},title:e.title}),key:String(e.id)},O.list[e.id]&&B(O.list[e.id]),n[e.id]&&D(n[e.id]))}))}),[O.list,t.list]),I=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(e).map((function(e){return m.a.createElement(K,{value:e.id,title:e.title,key:String(e.id)},O.list[e.id]&&I(O.list[e.id]))}))}),[O.list]),H=Object(s.useCallback)(function(){var e=j(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id?f(t):y(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return m.a.createElement("div",{className:"article write"},m.a.createElement(g.a,null),m.a.createElement("div",{className:"main"},m.a.createElement("div",{className:"titles"},m.a.createElement("div",{className:"search"},m.a.createElement("input",{type:"text"}),m.a.createElement("span",{className:"search-btn",title:"搜索"},m.a.createElement(o.a,{type:"search"}))),m.a.createElement("div",{className:"tree"},m.a.createElement(d.a,{showLine:!0,switcherIcon:m.a.createElement(o.a,{type:"caret-down"}),draggable:!0,blockNode:!0,onDrop:function(e){var t=e.node,r=e.dragNode.props.eventKey,a=t.props.eventKey,c=r.includes("-article-"),l=!a.includes("-article-");r&&a&&(!c&&E({id:r,pid:a}),c&&l&&n({id:r.split("-article-").pop(),group_id:a}))},onSelect:function(e,n){var r=n.selectedNodes,a=n.nativeEvent;if(!Q.current.contains(a.target)){var c=r.pop();if(c){var l=c.key;if(l.includes("-article-")){var i=l.split("-article-"),o=i.pop(),u=i.pop(),A=t.list[u].find((function(e){return e.id==o})),d=A.content&&A.content.content;T.txt.html(d),G({type:"update",payload:{id:o,group_id:u,title:A.title,content:d,disabled:A.disabled}})}else T.txt.clear(),G({type:"add",payload:{title:"",disabled:0,content:"",group_id:Number(e.pop())}})}}},defaultExpandedKeys:["0"],onRightClick:function(){return!1}},m.a.createElement(K,{switcherIcon:m.a.createElement(o.a,{type:"read"}),title:m.a.createElement(i.a,{overlay:m.a.createElement(u.a,null,m.a.createElement(u.a.Item,{onClick:function(){return y()}},"添加文章"),m.a.createElement(u.a.Item,{onClick:function(){return L()}},"添加分组")),trigger:["contextMenu"]},m.a.createElement("div",{className:"i-tree-node"},m.a.createElement("div",{className:"context-menu__title"},m.a.createElement("b",null,"我的文章")),m.a.createElement("div",{ref:Q},m.a.createElement(a.a,{title:m.a.createElement(c.a,{value:F,onChange:function(e){return C(e.target.value)},style:{marginLeft:10}}),icon:m.a.createElement(o.a,{type:"cluster",style:{fontSize:24}}),onConfirm:function(){return Y()},onCancel:function(){return C("")},cancelText:"取消",okText:"确认"},m.a.createElement(o.a,{style:{fontSize:18},type:"plus"}))))),key:"0"},B(O.list[0]),D(t.list[0]))))),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"title"},m.a.createElement("input",{onChange:function(e){return G({type:U.id?"update":"add",payload:{title:e.target.value}})},value:U.title,placeholder:"输入标题"})),m.a.createElement("div",{className:"tools"},m.a.createElement("div",{className:"tool-item group-selector"},m.a.createElement(r.a,{showSearch:!0,value:U.group_id,dropdownStyle:{maxHeight:300,overflow:"auto"},placeholder:"请选择分类",size:"small",treeDefaultExpandAll:!0,onChange:function(e){return G({type:U.id?"update":"add",payload:{group_id:e}})}},m.a.createElement(K,{value:"0",title:"我的文章",key:"0"},I(O.list[0])))),m.a.createElement("div",{className:"tool-item",onClick:function(){x||q||(G({payload:{disabled:Number(!U.disabled)}}),H(w({},U,{disabled:Number(!U.disabled)})))},title:U.disabled?"取消发布":"发布"},x||q?m.a.createElement(o.a,{type:"loading"}):U.disabled?m.a.createElement(o.a,{type:"file-text"}):m.a.createElement(o.a,{type:"file-unknown"})),m.a.createElement("div",{className:"tool-item",onClick:function(){return H(U)},title:"保存 ctrl+s"},m.a.createElement(o.a,{type:"save"})),m.a.createElement("div",{className:"tool-item",title:"标签"},m.a.createElement(o.a,{type:"tag"})),m.a.createElement("div",{className:"tool-item",title:"预览"},m.a.createElement(o.a,{type:"file-word"}))),m.a.createElement("div",{className:"editor"},m.a.createElement("div",{className:"editor-toolbar",ref:z}),m.a.createElement("div",{className:"editor-text",ref:M})))))}));var V={title:"",group_id:0,content:"",disabled:0},S=function(e,t){switch(t.type){case"add":return e.id&&delete e.id,w({},e,{},t.payload);case"update":default:return w({},e,{},t.payload)}}}}]);